# üöÄ Gu√≠a Completa: Ejecuci√≥n del Proyecto con Google ADK

## üìã Tabla de Contenidos

1. [Requisitos Previos](#requisitos-previos)
2. [Verificaci√≥n del Entorno](#verificaci√≥n-del-entorno)
3. [Ejecuci√≥n Paso a Paso](#ejecuci√≥n-paso-a-paso)
4. [Interpretaci√≥n de Resultados](#interpretaci√≥n-de-resultados)
5. [Soluci√≥n de Problemas](#soluci√≥n-de-problemas)

---

## 1. Requisitos Previos

### ‚úÖ Software Necesario

- **Python 3.11+** instalado
- **Git** instalado
- **Google Cloud SDK** (gcloud) instalado
- Cuenta de **Google Cloud** activa

### ‚úÖ Configuraci√≥n de Google Cloud

Debes tener:
- Un proyecto de Google Cloud creado
- Vertex AI API habilitada
- Credenciales configuradas

---

## 2. Verificaci√≥n del Entorno

### Paso 2.1: Verificar Python

```bash
python --version
# Debe mostrar: Python 3.11.x o superior
```

### Paso 2.2: Verificar Ubicaci√≥n del Proyecto

```bash
cd etl-movilidad-local
pwd
# Debes estar en: .../etl-movilidad-local/
```

### Paso 2.3: Verificar Archivo .env

```bash
cat .env
```

**Debe mostrar:**
```
GOOGLE_CLOUD_PROJECT=healthy-anthem-418104
GOOGLE_GENAI_USE_VERTEXAI=true
GOOGLE_CLOUD_LOCATION=us-central1
```

### Paso 2.4: Verificar Autenticaci√≥n de Google Cloud

```bash
gcloud auth application-default print-access-token
```

**Si muestra un token (empieza con `ya29.`)**: ‚úÖ Autenticado correctamente

**Si muestra error**: Ejecuta:
```bash
gcloud auth application-default login
```

### Paso 2.5: Verificar Dependencias Instaladas

```bash
pip show google-adk
```

**Debe mostrar:**
```
Name: google-adk
Version: 1.17.0
...
```

**Si no est√° instalado:**
```bash
pip install --user -r requirements.txt
```

---

## 3. Ejecuci√≥n Paso a Paso

### üéØ Opci√≥n 1: Ejecutar el Test Completo (Recomendado)

Este es el test que acabamos de probar exitosamente.

#### Paso 3.1: Ir al directorio del proyecto

```bash
cd etl-movilidad-local
```

#### Paso 3.2: Ejecutar el script de test

```bash
python scripts/test_gemini_v3.py
```

#### Paso 3.3: Observar la Salida

Deber√≠as ver algo como esto:

```
======================================================================
TESTING GOOGLE ADK WITH OUTPUT_SCHEMA (October 2025)
======================================================================

‚úÖ Project ID: healthy-anthem-418104
‚úÖ Using Google ADK (Agent Development Kit)
‚úÖ With Pydantic output_schema for automatic validation
‚úÖ Framework: google-adk v0.2+

--- Initializing ADK Scorer V3 (True ADK Implementation) ---
INFO:adk_scorer_v3:Initializing Google ADK Agent...
INFO:adk_scorer_v3:   GenAI Client created for Vertex AI
INFO:adk_scorer_v3:‚úÖ ADK Agent initialized successfully
INFO:adk_scorer_v3:   Model: gemini-2.0-flash
INFO:adk_scorer_v3:   Project: healthy-anthem-418104
INFO:adk_scorer_v3:   Location: us-central1
INFO:adk_scorer_v3:   Output schema: ScoringResponse (Pydantic validated)

‚úÖ ADK Agent initialized successfully

Agent Configuration:
  model: gemini-2.0-flash
  project: healthy-anthem-418104
  location: us-central1
  sdk_version: google-adk (Agent Development Kit)
  agent_name: mobility_news_scorer
  output_schema: ScoringResponse (Pydantic)
  framework: Google ADK v0.2+

--- Generating test news ---
‚úÖ Generated 3 test news items

--- Testing ADK Agent Scoring with Structured Output ---

[1/3] Suspensi√≥n temporal de servicio en L√≠nea A del Metro por man...
INFO:httpx:HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/healthy-anthem-418104/locations/us-central1/publishers/google/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
INFO:adk_scorer_v3:‚úÖ News kept: Suspensi√≥n temporal de servicio en L√≠nea A del Met... | Severity: Severity.MEDIUM | Score: 0.90

    ‚úÖ KEPT (Validated by Pydantic schema)
       Severity: Severity.MEDIUM
       Score: 0.90
       Area: Linea_A_Metro
       Tags: metro, suspension, mantenimiento
       Entities: Metro de Medell√≠n, Estaci√≥n Niqu√≠a
       Summary: Suspensi√≥n temporal del servicio en la L√≠nea A del Metro...
       Reasoning: Afecta el servicio de transporte masivo y requiere...

[2/3] Inauguran nuevas ciclorrutas en el sector de Laureles...
INFO:httpx:HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/healthy-anthem-418104/locations/us-central1/publishers/google/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
INFO:adk_scorer_v3:‚úÖ News kept: Inauguran nuevas ciclorrutas en el sector de Laure... | Severity: Severity.LOW | Score: 0.60

    ‚úÖ KEPT (Validated by Pydantic schema)
       Severity: Severity.LOW
       Score: 0.60
       Area: Laureles
       Tags: encicla, obra, mejora
       Entities: Alcald√≠a de Medell√≠n, Estadio Atanasio Girardot
       Summary: Inauguraci√≥n de 5 km de ciclorrutas en Laureles...
       Reasoning: Aumenta la infraestructura para movilidad en bicicleta...

[3/3] Pico y placa especial por festividades del fin de semana...
INFO:httpx:HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/healthy-anthem-418104/locations/us-central1/publishers/google/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
INFO:adk_scorer_v3:‚úÖ News kept: Pico y placa especial por festividades del fin de ... | Severity: Severity.MEDIUM | Score: 0.85

    ‚úÖ KEPT (Validated by Pydantic schema)
       Severity: Severity.MEDIUM
       Score: 0.85
       Area: Valle_Aburra
       Tags: restriccion, pico_y_placa, fin_de_semana
       Entities: √Årea Metropolitana del Valle de Aburr√°
       Summary: Se anuncia pico y placa especial para el fin de semana...
       Reasoning: La noticia informa sobre una restricci√≥n vehicular...

======================================================================
TEST COMPLETE - Google ADK with output_schema
======================================================================

‚úÖ Success indicators:
   - Agent initialized without errors
   - Structured responses validated by Pydantic
   - All required fields present in responses

üìä Key differences from V2 (SDK):
   - Using google.adk.agents.LlmAgent (not google.generativeai)
   - Automatic JSON validation via output_schema
   - No manual JSON parsing or error handling needed
   - Production-ready with guaranteed schema compliance
```

---

### üéØ Opci√≥n 2: Uso Program√°tico en Python

Si quieres integrar el scorer en tu propio c√≥digo:

#### Paso 3.1: Crear un script de prueba

```bash
# Crear archivo test_custom.py
nano test_custom.py
```

#### Paso 3.2: Copiar este c√≥digo

```python
import sys
import os
from dotenv import load_dotenv

# Agregar src al path
sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'src'))

# Cargar variables de entorno
load_dotenv()

from adk_scorer_v3 import ADKScorerV3

# Obtener project ID
project_id = os.getenv("GOOGLE_CLOUD_PROJECT")

print("üöÄ Inicializando Google ADK Scorer...")
scorer = ADKScorerV3(project_id=project_id)
print("‚úÖ Scorer inicializado correctamente\n")

# Noticia de prueba
noticia = {
    'source': 'Metro de Medell√≠n',
    'url': 'https://www.metrodemedellin.gov.co/test',
    'title': 'Cierre completo de la L√≠nea A por emergencia',
    'body': 'Se reporta un cierre total de la L√≠nea A del Metro debido a una emergencia t√©cnica. Se espera que el servicio se restablezca en 3 horas. Buses de contingencia est√°n disponibles.',
    'published_at': '2025-10-29T15:00:00'
}

print(f"üì∞ Analizando noticia: {noticia['title']}\n")

# Puntuar noticia
resultado = scorer.score(noticia)

if resultado:
    print("‚úÖ NOTICIA RELEVANTE - Ser√° incluida en el sistema")
    print(f"\nüìä Detalles del scoring:")
    print(f"   ‚Ä¢ Severity: {resultado['severity']}")
    print(f"   ‚Ä¢ Score: {resultado['relevance_score']}")
    print(f"   ‚Ä¢ √Årea: {resultado['area']}")
    print(f"   ‚Ä¢ Tags: {', '.join(resultado['tags'])}")
    print(f"   ‚Ä¢ Entities: {', '.join(resultado['entities'])}")
    print(f"   ‚Ä¢ Summary: {resultado['summary']}")
    print(f"   ‚Ä¢ Reasoning: {resultado['reasoning']}")
else:
    print("‚ùå NOTICIA NO RELEVANTE - Ser√° descartada")
```

#### Paso 3.3: Ejecutar tu script

```bash
python test_custom.py
```

---

### üéØ Opci√≥n 3: Probar con Tus Propias Noticias

#### Paso 3.1: Modificar generate_test_news.py

Abre el archivo:
```bash
nano scripts/generate_test_news.py
```

#### Paso 3.2: Agregar tus propias noticias

Agrega noticias al array `news_samples`:

```python
news_samples = [
    {
        'source': 'Tu Fuente',
        'url': 'https://ejemplo.com',
        'title': 'Tu T√≠tulo de Noticia',
        'body': 'Contenido completo de la noticia...',
        'published_at': '2025-10-29T10:00:00'
    },
    # ... m√°s noticias
]
```

#### Paso 3.3: Ejecutar el test

```bash
python scripts/test_gemini_v3.py
```

---

## 4. Interpretaci√≥n de Resultados

### üîç Entendiendo la Salida

#### ‚úÖ Indicadores de √âxito

1. **Inicializaci√≥n Exitosa:**
   ```
   INFO:adk_scorer_v3:‚úÖ ADK Agent initialized successfully
   ```

2. **Conexi√≥n a Vertex AI:**
   ```
   INFO:httpx:HTTP Request: POST https://us-central1-aiplatform.googleapis.com/...
   "HTTP/1.1 200 OK"
   ```

3. **Respuesta Validada:**
   ```
   ‚úÖ KEPT (Validated by Pydantic schema)
   ```

#### üìä Campos de Respuesta

Cada noticia procesada devuelve:

| Campo | Descripci√≥n | Ejemplo |
|-------|-------------|---------|
| **keep** | Si la noticia es relevante | `true` / `false` |
| **severity** | Nivel de urgencia | `LOW`, `MEDIUM`, `HIGH`, `CRITICAL` |
| **relevance_score** | Puntuaci√≥n 0.0-1.0 | `0.90` |
| **area** | Zona geogr√°fica afectada | `Linea_A_Metro`, `Laureles` |
| **tags** | Etiquetas clasificatorias | `["metro", "suspension"]` |
| **entities** | Entidades mencionadas | `["Metro de Medell√≠n"]` |
| **summary** | Resumen del impacto | "Suspensi√≥n temporal..." |
| **reasoning** | Justificaci√≥n de la decisi√≥n | "Afecta transporte masivo..." |

#### üéØ Interpretaci√≥n de Severity

- **CRITICAL**: Bloqueos totales, accidentes graves, suspensi√≥n de servicios principales
- **HIGH**: Desv√≠os importantes, retrasos significativos, obras mayores
- **MEDIUM**: Cambios moderados en rutas, eventos que aumenten tr√°fico
- **LOW**: Informaci√≥n general, mejoras menores, mantenimientos programados

#### üìà Interpretaci√≥n de Score

- **0.9 - 1.0**: Muy relevante, impacto inmediato en movilidad
- **0.7 - 0.89**: Relevante, afecta movilidad de manera significativa
- **0.5 - 0.69**: Moderadamente relevante, impacto limitado
- **0.0 - 0.49**: Poco relevante (generalmente keep=false)

---

## 5. Soluci√≥n de Problemas

### ‚ùå Error: "GOOGLE_CLOUD_PROJECT not set"

**Soluci√≥n:**
```bash
# Verificar .env
cat .env

# Si no existe o est√° mal, editarlo:
nano .env

# Agregar:
GOOGLE_CLOUD_PROJECT=healthy-anthem-418104
GOOGLE_GENAI_USE_VERTEXAI=true
GOOGLE_CLOUD_LOCATION=us-central1
```

### ‚ùå Error: "Could not automatically determine credentials"

**Soluci√≥n:**
```bash
gcloud auth application-default login
```

Esto abrir√° tu navegador para autenticarte.

### ‚ùå Error: "ModuleNotFoundError: No module named 'google.adk'"

**Soluci√≥n:**
```bash
pip install --user -r requirements.txt
```

### ‚ùå Error: "HTTP/1.1 403 Forbidden"

**Causa:** Vertex AI API no est√° habilitada

**Soluci√≥n:**
```bash
# Habilitar Vertex AI API
gcloud services enable aiplatform.googleapis.com --project=healthy-anthem-418104
```

O ve a: https://console.cloud.google.com/apis/library/aiplatform.googleapis.com

### ‚ùå Error: "Session not found"

**Causa:** Problema con la creaci√≥n de sesiones

**Soluci√≥n:** Este error ya est√° corregido en la versi√≥n actual. Aseg√∫rate de tener la √∫ltima versi√≥n del c√≥digo.

### ‚ùå Error: "Event loop is closed"

**Causa:** Problema con el manejo de asyncio

**Soluci√≥n:** Este error ya est√° corregido en la versi√≥n actual. El c√≥digo ahora maneja correctamente el event loop.

### ‚ùå Las 3 noticias aparecen como "DISCARDED"

**Causa:** Problema con la extracci√≥n de la respuesta del agente

**Soluci√≥n:** Verifica que tienes la versi√≥n m√°s reciente de `adk_scorer_v3.py` que extrae correctamente del `Event.content.parts[0].text`

---

## 6. Flujo Completo del Proceso

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. INICIALIZACI√ìN                                           ‚îÇ
‚îÇ    python scripts/test_gemini_v3.py                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. CARGA DE CONFIGURACI√ìN                                   ‚îÇ
‚îÇ    ‚Ä¢ Lee .env (GOOGLE_CLOUD_PROJECT, etc.)                  ‚îÇ
‚îÇ    ‚Ä¢ Carga ADKScorerV3                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. CREACI√ìN DEL AGENTE ADK                                  ‚îÇ
‚îÇ    ‚Ä¢ genai.Client(vertexai=True)                            ‚îÇ
‚îÇ    ‚Ä¢ Gemini model con client                                ‚îÇ
‚îÇ    ‚Ä¢ LlmAgent con output_schema=ScoringResponse             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. GENERACI√ìN DE NOTICIAS DE PRUEBA                         ‚îÇ
‚îÇ    ‚Ä¢ generate_test_news() crea 3 noticias ejemplo           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. SCORING DE CADA NOTICIA                                  ‚îÇ
‚îÇ    Para cada noticia:                                       ‚îÇ
‚îÇ    ‚îú‚îÄ Construir prompt con datos de la noticia             ‚îÇ
‚îÇ    ‚îú‚îÄ Crear mensaje (types.Content)                        ‚îÇ
‚îÇ    ‚îú‚îÄ Llamar runner.run_async()                            ‚îÇ
‚îÇ    ‚îú‚îÄ Enviar a Vertex AI / Gemini 2.0 Flash               ‚îÇ
‚îÇ    ‚îú‚îÄ Recibir respuesta (Event object)                     ‚îÇ
‚îÇ    ‚îú‚îÄ Extraer JSON de event.content.parts[0].text          ‚îÇ
‚îÇ    ‚îú‚îÄ Validar con Pydantic (ScoringResponse)               ‚îÇ
‚îÇ    ‚îî‚îÄ Devolver resultado enriquecido                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 6. MOSTRAR RESULTADOS                                        ‚îÇ
‚îÇ    ‚Ä¢ Imprime detalles de cada noticia procesada            ‚îÇ
‚îÇ    ‚Ä¢ Indica si fue KEPT o DISCARDED                        ‚îÇ
‚îÇ    ‚Ä¢ Muestra severity, score, tags, summary, etc.          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 7. Ejemplo Completo de Sesi√≥n

```bash
# 1. Ir al directorio
cd etl-movilidad-local

# 2. Verificar autenticaci√≥n
gcloud auth application-default print-access-token
# Salida: ya29.a0ATi6K2uTGMsa3Qkn-f4483zq-uHDaU...

# 3. Verificar .env
cat .env
# Salida:
# GOOGLE_CLOUD_PROJECT=healthy-anthem-418104
# GOOGLE_GENAI_USE_VERTEXAI=true
# GOOGLE_CLOUD_LOCATION=us-central1

# 4. Ejecutar test
python scripts/test_gemini_v3.py

# 5. Observar salida (debe tardar ~10-15 segundos)
# ...
# ‚úÖ KEPT (Validated by Pydantic schema)
# ...
```

---

## 8. Verificaci√≥n Final

### ‚úÖ Checklist de Verificaci√≥n

- [ ] Python 3.11+ instalado
- [ ] Google Cloud SDK instalado
- [ ] Autenticado con `gcloud auth application-default login`
- [ ] Archivo `.env` configurado correctamente
- [ ] Dependencias instaladas (`pip show google-adk` funciona)
- [ ] Vertex AI API habilitada en el proyecto
- [ ] Test `python scripts/test_gemini_v3.py` ejecuta sin errores
- [ ] Las 3 noticias muestran resultado con detalles completos

### üéâ Si todos los items est√°n ‚úÖ

**¬°Felicitaciones! El sistema Google ADK est√° funcionando correctamente.**

---

## 9. Pr√≥ximos Pasos

Una vez que el test funciona, puedes:

1. **Integrar en tu ETL:**
   ```python
   from adk_scorer_v3 import ADKScorerV3

   scorer = ADKScorerV3(project_id="healthy-anthem-418104")
   noticias_enriquecidas = scorer.score_batch(noticias_originales)
   ```

2. **Procesar noticias reales:**
   - Leer de RSS feeds
   - Filtrar y enriquecer con ADK
   - Guardar en base de datos

3. **Monitorear y optimizar:**
   - Agregar logs detallados
   - Implementar cach√©
   - Ajustar prompts seg√∫n resultados

---

## üìû Soporte

**Si encuentras problemas:**

1. Revisa la secci√≥n [Soluci√≥n de Problemas](#soluci√≥n-de-problemas)
2. Verifica los logs en la consola
3. Consulta `MIGRACION_ADK.md` para detalles t√©cnicos
4. Revisa `FUNCIONAMIENTO_ADK.md` para entender el flujo interno

---

**¬°Listo para producci√≥n!** üöÄ
